google.charts.load('current', {packages: ['corechart']});
google.charts.setOnLoadCallback(drawChart);

function drawChart() {
    var data = google.visualization.arrayToDataTable([
        ['Day', 'Reg', { role: 'annotation' }, 'PS', { role: 'annotation' }, 'PS/Reg', { role: 'annotation' }],
        ['1', 108, '108', 31, '31', 0.2870, '28.70%'],
        ['2', 205, '205', 66, '66', 0.3210, '32.10%'],
        ['3', 163, '163', 74, '74', 0.4534, '45.34%'],
        ['4', 160, '160', 78, '78', 0.4875, '48.75%'],
        ['5', 135, '135', 77, '77', 0.5704, '57.04%'],
        ['6', 232, '232', 86, '86', 0.3707, '37.07%'],
        ['7', 204, '204', 90, '90', 0.4412, '44.12%'],
        ['8', 163, '163', 119, '119', 0.7301, '73.01%'],
        ['9', 116, '116', 118, '118', 1.0172, '101.72%'],
        ['10', 142, '142', 88, '88', 0.6197, '61.97%'],
        ['11', 106, '106', 96, '96', 0.9057, '90.57%'],
        ['12', 92, '92', 66, '66', 0.7174, '71.74%'],
        ['13', 124, '124', 81, '81', 0.6532, '65.32%'],
        ['14', 113, '113', 58, '58', 0.5133, '51.33%'],
        ['15', 142, '142', 98, '98', 0.6901, '69.01%'],
        ['16', 150, '150', 104, '104', 0.6933, '69.33%'],
        ['17', 126, '126', 109, '109', 0.8651, '86.51%'],
        ['18', 113, '113', 95, '95', 0.8407, '84.07%'],
        ['19', 103, '103', 88, '88', 0.8544, '85.44%'],
        ['20', 201, '201', 111, '111', 0.5522, '55.22%'],
        ['21', 182, '182', 95, '95', 0.5220, '52.20%'],
        ['22', 174, '174', 95, '95', 0.5460, '54.60%'],
        ['23', 186, '186', 113, '113', 0.6075, '60.75%'],
        ['24', 180, '180', 91, '91', 0.5056, '50.56%'],
        ['25', 181, '181', 109, '109', 0.6022, '60.22%'],
        ['26', 120, '120', 54, '54', 0.4500, '45.00%'],
        ['27', 173, '173', 102, '102', 0.5890, '58.90%'],
        ['28', 216, '216', 94, '94', 0.4352, '43.52%'],
        ['29', 183, '183', 87, '87', 0.4754, '47.54%'],
        ['30', 143, '143', 87, '87', 0.6084, '60.84%'],
        ['31', 181, '181', 70, '70', 0.3867, '38.67%']
    ]);

    var options = {
        title: 'Performance by Day',
        vAxes: {
            0: {title: 'Thousands'},
            1: {title: 'Percentage', format: 'percent', viewWindow: {min: 0, max: 1}}
        },
        hAxis: {title: 'Day'},
        seriesType: 'bars',
        series: {
            0: {type: 'bars', targetAxisIndex: 0}, // Reg as bars
            1: {type: 'bars', targetAxisIndex: 0}, // PS as bars
            2: {type: 'line', targetAxisIndex: 1, lineWidth: 3, pointSize: 8, color: '#3498db', curveType: 'none'} // PS/Reg as line
        },
        annotations: {
            alwaysOutside: true,
            textStyle: {
                fontSize: 12,
                color: '#000',
                bold: true
            }
        },
        legend: { position: 'bottom' },
        colors: ['#e67e22', '#1a237e', '#b0bec5'],
        chartArea: {
            left: '10%',
            top: '10%',
            width: '85%',
            height: '70%'
        }
    };

    var chart = new google.visualization.ComboChart(document.getElementById('chart_div'));
    chart.draw(data, options);
}
