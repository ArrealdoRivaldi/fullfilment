<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="au theme template">
    <meta name="author" content="Hau Nguyen">
    <meta name="keywords" content="au theme template">
    <title>FBB Dashboard</title>

    <!-- CSS Libraries -->
    <link href="css/font-face.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-4.7/css/font-awesome.min.css" rel="stylesheet" media="all">
    <link href="vendor/font-awesome-5/css/fontawesome-all.min.css" rel="stylesheet" media="all">
    <link href="vendor/mdi-font/css/material-design-iconic-font.min.css" rel="stylesheet" media="all">
    <link href="vendor/bootstrap-4.1/bootstrap.min.css" rel="stylesheet" media="all">
    <link href="vendor/animsition/animsition.min.css" rel="stylesheet" media="all">
    <link href="vendor/perfect-scrollbar/perfect-scrollbar.css" rel="stylesheet" media="all">
    <link href="vendor/wow/animate.css" rel="stylesheet" media="all">
    <link href="vendor/select2/select2.min.css" rel="stylesheet" media="all">
    <link href="vendor/slick/slick.css" rel="stylesheet" media="all">
    <link href="css/theme.css" rel="stylesheet" media="all">
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        .calendar-day {
            transition: all 0.3s ease;
        }
        .calendar-day:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        .highlight {
            background-color: #1a64c5;
            font-weight: 600;
        }
        .performance-card {
            transition: all 0.3s ease;
        }
        .performance-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .card {
            border-radius: 3px;
            background-clip: border-box;
            border: 1px solid rgba(0, 0, 0, 0.125);
            margin-bottom: 20px;
        }
        .card-body {
            padding: 1.25rem;
        }
    </style>
</head>

<body class="animsition">
    <div class="page-wrapper">
        <!-- HEADER MOBILE-->
        <header class="header-mobile d-block d-lg-none">
            <div class="header-mobile__bar">
                <div class="container-fluid">
                    <div class="header-mobile-inner">
                        <a class="logo" href="index.html">
                            <img src="images/icon/logo.png" alt="FBB" />
                        </a>
                        <button class="hamburger hamburger--slider" type="button">
                            <span class="hamburger-box">
                                <span class="hamburger-inner"></span>
                            </span>
                        </button>
                    </div>
                </div>
            </div>
            <nav class="navbar-mobile">
                <div class="container-fluid">
                    <ul class="navbar-mobile__list list-unstyled">
                        <li><a href="index.html"><i class="fas fa-tachometer-alt"></i>Dashboard</a></li>
                        <li class="has-sub">
                            <a class="js-arrow" href="#"><i class="fas fa-chart-line"></i>Achievement</a>
                            <ul class="navbar-mobile-sub__list list-unstyled js-sub-list">
                                <li><a href="monthly.html">Data Monthly</a></li>
                                <li><a href="daily.html">Data Daily</a></li>
                                <li><a href="fallout.html">Data Fallout</a></li>
                            </ul>
                        </li>
                        <li><a href="map.html"><i class="fas fa-map-marker-alt"></i>Maps</a></li>
                    </ul>
                </div>
            </nav>
        </header>
        <!-- END HEADER MOBILE-->

        <!-- MENU SIDEBAR-->
        <aside class="menu-sidebar d-none d-lg-block">
            <div class="logo">
                <a href="#"><img src="images/icon/logo.png" alt="FBB" /></a>
            </div>
            <div class="menu-sidebar__content js-scrollbar1">
                <nav class="navbar-sidebar">
                    <ul class="list-unstyled navbar__list">
                        <li class="active"><a href="index.html"><i class="fas fa-tachometer-alt"></i>Dashboard</a></li>
                        <li class="has-sub">
                            <a class="js-arrow" href="#"><i class="fas fa-chart-line"></i>Achievement</a>
                            <ul class="list-unstyled navbar__sub-list js-sub-list">
                                <li><a href="monthly.html">Data Monthly</a></li>
                                <li><a href="daily.html">Data Daily</a></li>
                                <li><a href="fallout.html">Data Fallout</a></li>
                            </ul>
                        </li>
                        <li><a href="map.html"><i class="fas fa-map-marker-alt"></i>Maps</a></li>
                    </ul>
                </nav>
            </div>
        </aside>
        <!-- END MENU SIDEBAR-->

        <!-- PAGE CONTAINER-->
        <div class="page-container">
            <!-- HEADER DESKTOP-->
            <header class="header-desktop">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <div class="header-wrap">
                            <h2 class="title-1">Performance Dashboard</h2>
                            <div class="header-button">
                                <div class="account-wrap">
                                    <p class="text-muted mb-4">ðŸ“Œ Last Updated: <span id="lastUpdate">Senin  4/24/2025</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- END HEADER DESKTOP-->

            <!-- MAIN CONTENT-->
            <div class="main-content">
                <div class="section__content section__content--p30">
                    <div class="container-fluid">
                        <!-- Filter Section -->
                        <div class="card">
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="region">Region</label>
                                            <select id="region" class="form-control">
                                                <option value="all">All Regions</option>
                                                <option value="BANJARMASIN">BANJARMASIN</option>
                                                <option value="BALIKPAPAN">BALIKPAPAN</option>
                                                <option value="PALANGKARAYA">PALANGKARAYA</option>
                                                <option value="PANGKALAN BUN">PANGKALAN BUN</option>
                                                <option value="PONTIANAK">PONTIANAK</option>
                                                <option value="SAMARINDA">SAMARINDA</option>
                                                <option value="TARAKAN">TARAKAN</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="month">Month</label>
                                            <select id="month" class="form-control">
                                                <option value="all">All Months</option>
                                                <option value="01">January</option>
                                                <option value="02">February</option>
                                                <option value="03">March</option>
                                                <option value="04">April</option>
                                                <option value="05">May</option>
                                                <option value="06">June</option>
                                                <option value="07">July</option>
                                                <option value="08">August</option>
                                                <option value="09">September</option>
                                                <option value="10">October</option>
                                                <option value="11">November</option>
                                                <option value="12">December</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="form-group">
                                            <label for="year">Year</label>
                                            <select id="year" class="form-control">
                                                <option value="2025">2025</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Performance Summary Cards -->
                        <div class="row">
                            <div class="col-md-4">
                                <div class="card performance-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <h4 class="text-muted">Total RE</h4>
                                                <h2 id="total-re" class="text-indigo">0</h2>
                                            </div>
                                            <div class="p-3 rounded-circle bg-indigo-100 text-indigo">
                                                <i class="fas fa-user-plus fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-4">
                                            <p class="text-muted">Current period data</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card performance-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <h4 class="text-muted">Total PS</h4>
                                                <h2 id="total-ps" class="text-blue">0</h2>
                                            </div>
                                            <div class="p-3 rounded-circle bg-blue-100 text-blue">
                                                <i class="fas fa-bolt fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-4">
                                            <p class="text-muted">Current period data</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="card performance-card">
                                    <div class="card-body">
                                        <div class="d-flex justify-content-between">
                                            <div>
                                                <h4 class="text-muted">PS/REG Ratio</h4>
                                                <h2 id="total-ratio" class="text-purple">0%</h2>
                                            </div>
                                            <div class="p-3 rounded-circle bg-purple-100 text-purple">
                                                <i class="fas fa-percentage fa-2x"></i>
                                            </div>
                                        </div>
                                        <div class="mt-4">
                                            <p class="text-muted">Current period data</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Calendar View -->
                        <div class="card">
                            <div class="card-body">
                                <h3 class="title-3">Calendar View</h3>
                                <div class="table-responsive">
                                    <div id="calendar" class="inline-block min-w-full"></div>
                                </div>
                            </div>
                        </div>

                        <!-- Chart Section -->
                        <div class="card">
                            <div class="card-body">
                                <h3 class="title-3">Performance Trend</h3>
                                <div class="chart-container" style="height: 400px">
                                    <canvas id="performanceChart"></canvas>
                                </div>
                            </div>
                        </div>

                        <!-- Data Table -->
                        <div class="card">
                            <div class="card-body">
                                <div class="d-flex justify-content-between">
                                    <h3 class="title-3">Performance Data</h3>
                                    <button id="export-btn" class="btn btn-primary">
                                        <i class="fas fa-download mr-2"></i>Export Data
                                    </button>
                                </div>
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Date</th>
                                                <th>Region</th>
                                                <th>RE</th>
                                                <th>PS</th>
                                                <th>PS/REG</th>
                                            </tr>
                                        </thead>
                                        <tbody id="data-table">
                                            <!-- Data will be populated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END MAIN CONTENT-->
        </div>
        <!-- END PAGE CONTAINER-->
    </div>

    <!-- Vendor JS -->
    <script src="vendor/jquery-3.2.1.min.js"></script>
    <script src="vendor/bootstrap-4.1/popper.min.js"></script>
    <script src="vendor/bootstrap-4.1/bootstrap.min.js"></script>
    <script src="vendor/animsition/animsition.min.js"></script>
    <script src="vendor/select2/select2.min.js"></script>
    <script src="js/main.js"></script>

    <script>
        // Get current month and set as default
        const currentDate = new Date();
        const currentMonth = (currentDate.getMonth() + 1).toString().padStart(2, '0');
        document.getElementById('month').value = currentMonth;

        // Sample JSON data for 2025
        const performanceData = [
        { date: "01/01/2025", region: "BALIKPAPAN", re: 108, ps: 31, ps_reg: 28.70 },
        { date: "02/01/2025", region: "BALIKPAPAN", re: 205, ps: 66, ps_reg: 32.20 },
        { date: "03/01/2025", region: "BALIKPAPAN", re: 163, ps: 74, ps_reg: 45.40 },
        { date: "04/01/2025", region: "BALIKPAPAN", re: 160, ps: 78, ps_reg: 48.75 },
        { date: "05/01/2025", region: "BALIKPAPAN", re: 135, ps: 77, ps_reg: 57.04 },
        { date: "06/01/2025", region: "BALIKPAPAN", re: 232, ps: 86, ps_reg: 37.07 },
        { date: "07/01/2025", region: "BALIKPAPAN", re: 205, ps: 90, ps_reg: 43.90 },
        { date: "08/01/2025", region: "BALIKPAPAN", re: 163, ps: 119, ps_reg: 72.39 },
        { date: "09/01/2025", region: "BALIKPAPAN", re: 1116, ps: 118, ps_reg: 101.72 },
        { date: "10/01/2025", region: "BALIKPAPAN", re: 142, ps: 88, ps_reg: 61.97 },
        { date: "11/01/2025", region: "BALIKPAPAN", re: 106, ps: 96, ps_reg: 90.57 },
        { date: "12/01/2025", region: "BALIKPAPAN", re: 92, ps: 66, ps_reg: 71.74 },
        { date: "13/01/2025", region: "BALIKPAPAN", re: 124, ps: 81, ps_reg: 65.32 },
        { date: "14/01/2025", region: "BALIKPAPAN", re: 113, ps: 58, ps_reg: 51.33 },
        { date: "15/01/2025", region: "BALIKPAPAN", re: 142, ps: 98, ps_reg: 69.01 },
        { date: "16/01/2025", region: "BALIKPAPAN", re: 151, ps: 104, ps_reg: 68.87 },
        { date: "17/01/2025", region: "BALIKPAPAN", re: 126, ps: 109, ps_reg: 86.51 },
        { date: "18/01/2025", region: "BALIKPAPAN", re: 113, ps: 95, ps_reg: 84.07 },
        { date: "19/01/2025", region: "BALIKPAPAN", re: 103, ps: 88, ps_reg: 85.44 },
        { date: "20/01/2025", region: "BALIKPAPAN", re: 201, ps: 111, ps_reg: 55.22 },
        { date: "21/01/2025", region: "BALIKPAPAN", re: 182, ps: 95, ps_reg: 52.20 },
        { date: "22/01/2025", region: "BALIKPAPAN", re: 174, ps: 95, ps_reg: 54.60 },
        { date: "23/01/2025", region: "BALIKPAPAN", re: 186, ps: 113, ps_reg: 60.75 },
        { date: "24/01/2025", region: "BALIKPAPAN", re: 180, ps: 91, ps_reg: 50.56 },
        { date: "25/01/2025", region: "BALIKPAPAN", re: 182, ps: 109, ps_reg: 59.89 },
        { date: "26/01/2025", region: "BALIKPAPAN", re: 120, ps: 54, ps_reg: 45.00 },
        { date: "27/01/2025", region: "BALIKPAPAN", re: 173, ps: 102, ps_reg: 58.96 },
        { date: "28/01/2025", region: "BALIKPAPAN", re: 216, ps: 94, ps_reg: 43.52 },
        { date: "29/01/2025", region: "BALIKPAPAN", re: 183, ps: 87, ps_reg: 47.54 },
        { date: "30/01/2025", region: "BALIKPAPAN", re: 144, ps: 87, ps_reg: 60.42 },
        { date: "31/01/2025", region: "BALIKPAPAN", re: 181, ps: 70, ps_reg: 38.67 }
        ];

        // Initialize chart
        let performanceChart;
        const ctx = document.getElementById('performanceChart').getContext('2d');
        
        function initializeChart(filteredData) {
            if (performanceChart) {
                performanceChart.destroy();
            }
            
            const dates = filteredData.map(item => item.date);
            const reData = filteredData.map(item => item.re);
            const psData = filteredData.map(item => item.ps);
            const psRegData = filteredData.map(item => item.ps_reg);
            
            performanceChart = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: dates,
                    datasets: [
                        {
                            label: 'RE',
                            data: reData,
                            backgroundColor: 'rgba(79, 70, 229, 0.7)',
                            borderColor: 'rgba(79, 70, 229, 1)',
                            borderWidth: 1,
                            yAxisID: 'y'
                        },
                        {
                            label: 'PS',
                            data: psData,
                            backgroundColor: 'rgba(59, 130, 246, 0.7)',
                            borderColor: 'rgba(59, 130, 246, 1)',
                            borderWidth: 1,
                            yAxisID: 'y'
                        },
                        {
                            label: 'PS/REG (%)',
                            data: psRegData,
                            backgroundColor: 'rgba(124, 58, 237, 0.7)',
                            borderColor: 'rgba(124, 58, 237, 1)',
                            borderWidth: 1,
                            type: 'line',
                            yAxisID: 'y1'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'Count'
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            min: 0,
                            max: 100,
                            grid: {
                                drawOnChartArea: false
                            },
                            title: {
                                display: true,
                                text: 'Percentage (%)'
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.dataset.label === 'PS/REG (%)') {
                                        label += context.raw.toFixed(2) + '%';
                                    } else {
                                        label += context.raw;
                                    }
                                    return label;
                                }
                            }
                        },
                        legend: {
                            position: 'top',
                        }
                    }
                }
            });
        }

        // Update table with filtered data
        function updateTable(filteredData) {
            const tableBody = document.getElementById('data-table');
            tableBody.innerHTML = '';
            
            filteredData.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.date}</td>
                    <td>${item.region}</td>
                    <td>${item.re}</td>
                    <td>${item.ps}</td>
                    <td>${item.ps_reg.toFixed(2)}%</td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Update summary cards
        function updateSummaryCards(filteredData) {
            if (filteredData.length === 0) {
                document.getElementById('total-re').textContent = '0';
                document.getElementById('total-ps').textContent = '0';
                document.getElementById('total-ratio').textContent = '0%';
                return;
            }
            
            // Calculate current period totals
            const currentRe = filteredData.reduce((sum, item) => sum + item.re, 0);
            const currentPs = filteredData.reduce((sum, item) => sum + item.ps, 0);
            const currentRatio = currentRe > 0 ? (currentPs / currentRe) * 100 : 0;
            
            // Update current values
            document.getElementById('total-re').textContent = currentRe;
            document.getElementById('total-ps').textContent = currentPs;
            document.getElementById('total-ratio').textContent = currentRatio.toFixed(2) + '%';
        }

        // Generate calendar view
        function generateCalendar(filteredData) {
            const calendarEl = document.getElementById('calendar');
            calendarEl.innerHTML = '';
            
            // Group data by month
            const months = {};
            filteredData.forEach(item => {
                const [day, month, year] = item.date.split('/');
                const monthKey = `${month}/${year}`;
                
                if (!months[monthKey]) {
                    months[monthKey] = [];
                }
                
                months[monthKey].push({
                    day: parseInt(day),
                    month: parseInt(month),
                    year: parseInt(year),
                    data: item
                });
            });
            
            // Create calendar for each month
            for (const monthKey in months) {
                const [month, year] = monthKey.split('/');
                const monthData = months[monthKey];
                
                const monthNames = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
                const monthName = monthNames[parseInt(month) - 1];
                
                const monthHeader = document.createElement('h4');
                monthHeader.className = 'title-4 mb-3';
                monthHeader.textContent = `${monthName} ${year}`;
                calendarEl.appendChild(monthHeader);
                
                const table = document.createElement('table');
                table.className = 'table table-bordered';
                
                // Create header row with day names
                const thead = document.createElement('thead');
                const headerRow = document.createElement('tr');
                
                const dayNames = ['Sun', 'Mon', 'Tue', "Wed", "Thu", "Fri", "Sat"];
                dayNames.forEach(day => {
                    const th = document.createElement('th');
                    th.className = 'text-center';
                    th.textContent = day;
                    headerRow.appendChild(th);
                });
                
                thead.appendChild(headerRow);
                table.appendChild(thead);
                
                // Create calendar body
                const tbody = document.createElement('tbody');
                
                // Get first day of month and total days
                const firstDay = new Date(year, month - 1, 1).getDay();
                const daysInMonth = new Date(year, month, 0).getDate();
                
                let dayCount = 1;
                for (let i = 0; i < 6; i++) {
                    // Stop if we've processed all days
                    if (dayCount > daysInMonth) break;
                    
                    const row = document.createElement('tr');
                    
                    // Create cells for each day of the week
                    for (let j = 0; j < 7; j++) {
                        const cell = document.createElement('td');
                        cell.className = 'p-2 text-center';
                        
                        // Empty cells before first day of month
                        if (i === 0 && j < firstDay) {
                            cell.innerHTML = '&nbsp;';
                        } 
                        // Cells after last day of month
                        else if (dayCount > daysInMonth) {
                            cell.innerHTML = '&nbsp;';
                        } 
                        // Regular day cells
                        else {
                            const dayData = monthData.find(d => d.day === dayCount);
                            
                            const dayDiv = document.createElement('div');
                            dayDiv.className = 'calendar-day p-1 rounded';
                            
                            const dayNumber = document.createElement('div');
                            dayNumber.className = 'text-sm font-weight-bold mb-1';
                            dayNumber.textContent = dayCount;
                            
                            const reDiv = document.createElement('div');
                            reDiv.className = 'text-xs text-indigo';
                            reDiv.textContent = dayData ? `RE: ${dayData.data.re}` : 'RE: 0';
                            
                            const psDiv = document.createElement('div');
                            psDiv.className = 'text-xs text-blue';
                            psDiv.textContent = dayData ? `PS: ${dayData.data.ps}` : 'PS: 0';
                            
                            const ratioDiv = document.createElement('div');
                            ratioDiv.className = 'text-xs text-purple';
                            ratioDiv.textContent = dayData ? `PS/REG: ${dayData.data.ps_reg.toFixed(2)}%` : 'PS/REG: 0%';
                            
                            dayDiv.appendChild(dayNumber);
                            dayDiv.appendChild(reDiv);
                            dayDiv.appendChild(psDiv);
                            dayDiv.appendChild(ratioDiv);
                            
                            // Highlight today's date (for demo, we'll highlight the 15th)
                            if (dayCount === 15) {
                                dayDiv.classList.add('highlight');
                            }
                            
                            cell.appendChild(dayDiv);
                            dayCount++;
                        }
                        
                        row.appendChild(cell);
                    }
                    
                    tbody.appendChild(row);
                }
                
                table.appendChild(tbody);
                calendarEl.appendChild(table);
            }
        }

        // Filter data based on selections
        function filterData() {
            const region = document.getElementById('region').value;
            const month = document.getElementById('month').value;
            const year = document.getElementById('year').value;
            
            let filteredData = [...performanceData];
            
            // Filter by region
            if (region !== 'all') {
                filteredData = filteredData.filter(item => item.region === region);
            }
            
            // Filter by month and year
            if (month !== 'all') {
                filteredData = filteredData.filter(item => {
                    const [day, itemMonth, itemYear] = item.date.split('/');
                    return itemMonth === month && itemYear === year;
                });
            } else {
                // Filter by year only if month is 'all'
                filteredData = filteredData.filter(item => {
                    const [day, itemMonth, itemYear] = item.date.split('/');
                    return itemYear === year;
                });
            }
            
            return filteredData;
        }

        // Update all components
        function updateDashboard() {
            const filteredData = filterData();
            
            initializeChart(filteredData);
            updateTable(filteredData);
            updateSummaryCards(filteredData);
            generateCalendar(filteredData);
        }

        // Export data to CSV
        document.getElementById('export-btn').addEventListener('click', function() {
            const filteredData = filterData();
            
            if (filteredData.length === 0) {
                alert('No data to export');
                return;
            }
            
            // Create CSV content
            let csvContent = "data:text/csv;charset=utf-8,";
            csvContent += "Date,Region,RE,PS,PS/REG\n";
            
            filteredData.forEach(item => {
                csvContent += `${item.date},${item.region},${item.re},${item.ps},${item.ps_reg.toFixed(2)}%\n`;
            });
            
            // Create download link
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", "performance_data.csv");
            document.body.appendChild(link);
            
            // Trigger download
            link.click();
            document.body.removeChild(link);
        });

        // Event listeners for filter changes
        document.getElementById('region').addEventListener('change', updateDashboard);
        document.getElementById('month').addEventListener('change', updateDashboard);
        document.getElementById('year').addEventListener('change', updateDashboard);

        // Initialize dashboard
        updateDashboard();
    </script>
</body>
</html>